- name: Facts Demo
  hosts: iosxe1*
  gather_facts: false
  tasks:
    - name: Collect Facts Yourself
      cisco.ios.ios_facts:
        gather_subset: all

    - name:  Print the facts
      ansible.builtin.copy:
        dest: ./iosxe1_facts.txt
        content: |
          API         = "{{ ansible_net_api }}"
          API         = "{{ ansible_facts.net_api }}"
          API         = "{{ ansible_facts['net_api'] }}"
          Hostname    = "{{ ansible_facts['net_hostname'] }}"
          Image       = "{{ ansible_facts['net_image'] }}"
          Serial Num  = "{{ ansible_facts['net_serialnum'] }}"
          Version     = "{{ ansible_facts['net_version'] }}"
          System      = "{{ ansible_facts['net_system'] }}"
          Model       = "{{ ansible_facts['net_model'] }}"
          Memory Free = "{{ansible_facts['net_memfree_mb'] }}"
          Memory Total = "{{ansible_facts['net_memtotal_mb'] }}"

    - name: Setup Login Banner
      cisco.ios.ios_banner:
        banner: login
        text: "{{ inventory_hostname }} -- {{ ansible_facts['net_serialnum'] }} -- {{ ansible_facts['net_model'] }}"
        state: present
      when: ansible_facts['net_version'] > "17"
